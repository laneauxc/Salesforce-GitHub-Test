<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

{% seo %}
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  </head>
  <body>
    <div class="page-wrapper">
      <!-- Sidebar Navigation -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h2 class="sidebar-title">{{ site.title | default: site.github.repository_name }}</h2>
          <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
            <i class="fas fa-bars"></i>
          </button>
        </div>
        
        <nav class="sidebar-nav">
          {% for item in site.navigation %}
            <div class="nav-item">
              {% if item.subitems %}
                <a href="{{ site.baseurl }}{{ item.url }}" class="nav-link has-children" data-target="submenu-{{ forloop.index }}">
                  <span>{{ item.title }}</span>
                  <i class="fas fa-chevron-down chevron"></i>
                </a>
                <ul class="nav-submenu" id="submenu-{{ forloop.index }}">
                  {% for subitem in item.subitems %}
                    <li>
                      <a href="{{ site.baseurl }}/{{ subitem.url }}" class="nav-sublink">{{ subitem.title }}</a>
                    </li>
                  {% endfor %}
                </ul>
              {% else %}
                <a href="{{ site.baseurl }}{{ item.url }}" class="nav-link">
                  <span>{{ item.title }}</span>
                </a>
              {% endif %}
            </div>
          {% endfor %}
          
          {% if site.github.is_project_page %}
            <div class="nav-item">
              <a href="{{ site.github.repository_url }}" class="nav-link" target="_blank">
                <span>View on GitHub</span>
                <i class="fas fa-external-link-alt"></i>
              </a>
            </div>
          {% endif %}
        </nav>
      </aside>

      <!-- Main Content Area -->
      <div class="content-wrapper">
        <header class="page-header" role="banner">
          <button class="mobile-toggle" id="mobileToggle" aria-label="Toggle navigation">
            <i class="fas fa-bars"></i>
          </button>
          <h1 class="page-title">{{ page.title | default: site.title }}</h1>
          <p class="page-description">{{ page.description | default: site.description }}</p>
        </header>

        <main id="content" class="main-content" role="main">
          {{ content }}

          <footer class="site-footer">
            {% if site.github.is_project_page %}
              <span class="site-footer-owner"><a href="{{ site.github.repository_url }}">{{ site.github.repository_name }}</a> is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a>.</span>
            {% endif %}
            <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
          </footer>
        </main>
      </div>
    </div>

    <script>
      // Sidebar toggle functionality
      document.addEventListener('DOMContentLoaded', function() {
        const sidebar = document.getElementById('sidebar');
        const mobileToggle = document.getElementById('mobileToggle');
        const sidebarToggle = document.getElementById('sidebarToggle');
        
        // Mobile toggle
        if (mobileToggle) {
          mobileToggle.addEventListener('click', function() {
            sidebar.classList.toggle('active');
          });
        }
        
        // Desktop sidebar toggle
        if (sidebarToggle) {
          sidebarToggle.addEventListener('click', function() {
            sidebar.classList.toggle('collapsed');
            document.querySelector('.content-wrapper').classList.toggle('expanded');
          });
        }
        
        // Collapsible menu items
        const navLinksWithChildren = document.querySelectorAll('.nav-link.has-children');
        
        navLinksWithChildren.forEach(function(link) {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('data-target');
            const submenu = document.getElementById(targetId);
            const chevron = this.querySelector('.chevron');
            
            // Toggle submenu
            submenu.classList.toggle('active');
            chevron.classList.toggle('rotate');
            
            // Navigate to parent page on second click
            if (!submenu.classList.contains('active')) {
              window.location.href = this.getAttribute('href');
            }
          });
        });
        
        // Highlight active page
        const currentPath = window.location.pathname;
        const allLinks = document.querySelectorAll('.nav-link, .nav-sublink');
        
        allLinks.forEach(function(link) {
          const linkPath = new URL(link.href).pathname;
          if (currentPath.includes(linkPath) && linkPath !== '/') {
            link.classList.add('active');
            
            // Expand parent if sublink is active
            if (link.classList.contains('nav-sublink')) {
              const submenu = link.closest('.nav-submenu');
              if (submenu) {
                submenu.classList.add('active');
                const parentLink = submenu.previousElementSibling;
                if (parentLink) {
                  parentLink.querySelector('.chevron')?.classList.add('rotate');
                }
              }
            }
          }
        });
      });
    </script>
  </body>
</html>
